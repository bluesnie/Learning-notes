###### datetime:2022/07/22 10:20

###### author:nzb

# 埃氏筛选法

```python
__date__ = "2022/7/21 9:02"
__doc__ = """统计素数个数-埃氏筛选法"""

import timeit
from memory_profiler import profile
from functools import partial


# BF算法,即暴力(Brute Force)算法
def is_prime(num: int) -> bool:
    """是否素数"""
    for i in range(2, num):
        if num % i == 0:
            return False
    return True


# @profile(precision=4)
def brute_force(num: int) -> int:
    """统计素数个数"""
    cnt = 0
    for i in range(2, num):
        cnt += 1 if is_prime(i) else 0
    return cnt


# 埃氏筛法
# @profile(precision=4)
def eratosthenes(num: int) -> int:
    """
    埃氏筛法
    首先，将2到n范围内的所有整数写下来。其中最小的数字2是素数。将表中所有2的倍数都划去。表中剩余的最小数字是3，它不能被更小的数整除，所以是素数。再将表中所有3的倍数全都划去。依次类推，如果表中剩余的最小数字是m时，m就是素数。然后将表中所有m的倍数全部划去。像这样反复操作，就能依次枚举n以内的素数。
    :param num:
    :return:
    """
    flag = [False] * num  # False 代表素数
    cnt = 0
    for i in range(2, num):
        if not flag[i]:
            cnt += 1
            for j in range(i * i, num, i):
                flag[j] = True
    return cnt


if __name__ == '__main__':
    print("brute_force cost time:\t", timeit.timeit(partial(brute_force, 1000), number=100))
    print("eratosthenes cost time:\t", timeit.timeit(partial(eratosthenes, 1000), number=100))
```

```text
内存花费（1次）
brute_force cost memory:	 39.1797 MiB
eratosthenes cost memory:	 39.2148 MiB

时间花费（100次）
brute_force cost time:	 0.31746810000000003
eratosthenes cost time:	 0.009979599999999977
```