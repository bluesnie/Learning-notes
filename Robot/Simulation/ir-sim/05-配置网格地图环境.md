###### datetime:2025/12/21 16:00

###### author:nzb

# [配置网格地图环境](https://ir-sim.readthedocs.io/zh-cn/stable/usage/configure_grid_map.html#configure-grid-map-environment)

## 本节内容

- 配置网格地图环境
  - 网格地图配置参数

## Python 脚本与 YAML 配置文件

```python
import irsim

env = irsim.make()

for i in range(1000):

    env.step()
    env.render(0.05)

    if env.done():
        break

env.end()
```

- 配置网格地图需要在 world 部分指定 obstacle_map。mdownsample 用于对图像降采样以加速。
- 仿真时该 PNG 会被栅格化为地图：黑色像素代表障碍物，白色像素代表可通行区域。
- 你可使用自定义 PNG 图像创建不同的网格地图，并通过绝对或相对路径引用位于其他目录的图像文件。

```yaml
world:
  height: 50  
  width: 50  
  obstacle_map: 'cave.png'  # cave.png 图像需与 Python 脚本位于同一目录
  mdownsample: 2 # mdownsample 用于对图像降采样以加速。

robot:
  - kinematics: {name: 'acker'} 
    behavior: {name: 'dash'}
    shape: {name: 'rectangle', length: 4.6, width: 1.6, wheelbase: 3}
    state: [5, 5, 0, 0]
    goal: [40, 40, 0]
    vel_max: [4, 1]
    plot:
      show_trail: True
      traj_color: 'g'
      show_trajectory: True
      show_goal: False

    sensors: 
      - name: 'lidar2d'
        range_min: 0
        range_max: 20
        angle_range: 3.14
        number: 100
        alpha: 0.4


obstacle:
  - number: 10
    distribution: {name: 'manual'}
    shape:
      - {name: 'polygon', random_shape: true, center_range: [5, 10, 40, 30], avg_radius_range: [0.5, 2]} 
```